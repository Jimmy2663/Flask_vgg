<!DOCTYPE html>
<html>
<head>
    <title>Plant Disease Detection</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="container">
        <h1 class="main-heading">ðŸŒ¿ Plant Disease Detection</h1>
        <h2>Upload an Image for Classification</h2>
        <form id="uploadForm" action="/predict" method="POST" enctype="multipart/form-data">
            <input type="file" name="image" id="imageInput" accept="image/*" required><br>
            <input type="submit" value="Predict">
        </form>

        <img id="preview" src="#" alt="Image Preview" style="display: none;">
        <div class="result" id="result"></div>
    </div>

    <script>
        const form = document.getElementById('uploadForm');
        const resultDiv = document.getElementById('result');
        const preview = document.getElementById('preview');
        const imageInput = document.getElementById('imageInput');

        // Show image preview on file selection
        imageInput.addEventListener('change', function () {
            const file = this.files[0];
            if (file) {
                const reader = new FileReader();
                preview.style.display = 'block';

                reader.addEventListener('load', function () {
                    preview.setAttribute('src', this.result);
                });

                reader.readAsDataURL(file);
            } else {
                preview.style.display = 'none';
            }
        });

        // AJAX form submission
        form.addEventListener('submit', async function (e) {
            e.preventDefault();
            resultDiv.innerText = "Loading prediction...";
            const formData = new FormData(form);
            const response = await fetch('/predict', {
                method: 'POST',
                body: formData
            });
            const result = await response.json();
            resultDiv.innerText = "Prediction: " + result.prediction;
        });
    </script>
</body>
</html>
